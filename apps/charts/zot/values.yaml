image:
  repository: ghcr.io/project-zot/zot
  tag: v2.1.14@sha256:4183bd731bcc515dcf12f545d18245cfa568d338a986e4b92b7a9d89d2cc5463
  pullPolicy: IfNotPresent

subdomain: zot

# Deployment configuration
deployment:
  strategy: Recreate
  replicas: 1
  revisionHistoryLimit: 0

# Container configuration
container:
  ports:
    - name: http
      port: 5000
      protocol: TCP
  # Health probes commented out in original - can be enabled later
  # healthProbe:
  #   type: httpGet
  #   path: /v2/
  #   port: http

# Service configuration
service:
  port: 80
  targetPort: 5000
  type: ClusterIP

# Volume configuration
volumes:
  - name: data
    mountPath: /var/lib/registry
    persistentVolumeClaim: data
  - name: config
    mountPath: /etc/zot
    emptyDir: {}

# Persistent volume claims
persistentVolumeClaims:
  - name: data
    size: 50Gi
    storageClassName: persistent

# VirtualService configuration
virtualService:
  enabled: true
  gateways:
    public: true
    private: true

# OIDC client configuration
oidc:
  enabled: true
  redirectUris:
    - "/zot/auth/callback/oidc"
  subjectMode: user_username

# External secrets configuration
externalSecrets:
  - name: "{release}-secret"
    passwords:
      - name: password
        length: 64
        encoding: hex
        allowRepeat: true

# Environment variables
env:
  TZ:
    value: "{timezone}"
  BASE_URL:
    value: "https://{subdomain}.{domain}"
